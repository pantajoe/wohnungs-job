const helpAudio = new Audio("<%= audio_path('help.ogg') %>");

var isPlaying = false;

function playAudio() {
  if (isPlaying) {
    helpAudio.pause();
    helpAudio.currentTime = 0;
    $('.help-button').removeClass('is-active');
  }
  else {
    helpAudio.play();
    $('.help-button').addClass('is-active');
  }
}

helpAudio.onplaying = function() {
  isPlaying = true;
};
helpAudio.onpause = function() {
  isPlaying = false;
};

$(document).on('turbolinks:load', function() {
  if (isPlaying) $('.help-button').addClass('is-active');
  else $('.help-button').removeClass('is-active');

  $('.help-button').click(function() {
    playAudio();
  })
});
